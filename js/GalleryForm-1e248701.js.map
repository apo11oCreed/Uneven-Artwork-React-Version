{"version":3,"file":"GalleryForm-1e248701.js","sources":["../../src/components/ArtworkContainer.jsx","../../src/components/GalleryForm.jsx"],"sourcesContent":["import React, { Suspense } from 'react';\nimport Loader from './Loader';\nconst Artwork = React.lazy(()=>import('./Artwork'));\n\nexport default function ArtworkContainer({ imageCollection }) {\n\n\treturn (\n\t\t<>\n\t\t\t<ul className='tw-flex tw-flex-wrap tw-justify-between'>\n\t\t\t\t{imageCollection.map((item, index) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<Suspense\n\t\t\t\t\t\t\tfallback={<Loader />} key={index}>\n\t\t\t\t\t\t\t<Artwork item={item} index={index} />\n\t\t\t\t\t\t</Suspense>\n\t\t\t\t\t);\n\t\t\t\t})}\n\t\t\t</ul>\n\t\t</>\n\t);\n}\n","import React, { useState, useEffect } from 'react';\nimport ArtworkContainer from './ArtworkContainer';\n\nexport default function GalleryForm() {\n\tconst contentful = import.meta.env;\n\n\tconst [imgCollection, setImgCollection] = useState([]);\n\tconst [tagFilter, setTagFilter] = useState([]);\n\tconst [isLoading, setIsLoading] = useState(true);\n\n\tuseEffect(() => {\n\t\tconst spaceId = contentful.VITE_CONTENTFUL_SPACE_ID;\n\t\tconst accessToken = contentful.VITE_CONTENTFUL_DELIVERY_API_ACCESS_TOKEN;\n\t\tconst query = `\n\tquery imagesAssets {\n\t\timageCollection{\n\t\t\titems{\n\t\t\t\timage{\n\t\t\t\t\ttitle\n\t\t\t\t\tdescription\n\t\t\t\t\turl\n\t\t\t\t\tcontentfulMetadata{\n\t\t\t\t\t\ttags{\n\t\t\t\t\t\t\tname\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tassetCollection(where:{\n\t\t\tcontentfulMetadata:{\n\t\t\t  tags_exists:true\n\t\t\t}\n\t\t  }){\n\t\t\titems{\n\t\t\t\tcontentfulMetadata{\n\t\t\t\t\ttags{\n\t\t\t\t\t\tname\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t`;\n\n\t\tlet imagesQuery = [],\n\t\t\tassetsQuery = [];\n\n\t\twindow\n\t\t\t.fetch(`https://graphql.contentful.com/content/v1/spaces/${spaceId}/environments/master`, {\n\t\t\t\tmethod: 'POST',\n\t\t\t\theaders: {\n\t\t\t\t\t'content-type': 'application/json',\n\t\t\t\t\tAuthorization: `Bearer ${accessToken}`,\n\t\t\t\t},\n\t\t\t\tbody: JSON.stringify({\n\t\t\t\t\tquery,\n\t\t\t\t}),\n\t\t\t})\n\t\t\t.then((res) => res.json())\n\t\t\t.then(({ data, errors }) => {\n\t\t\t\tif (errors) {\n\t\t\t\t\tconsole.error(errors);\n\t\t\t\t}\n\n\t\t\t\timagesQuery = data.imageCollection.items;\n\t\t\t\tconst imageUrls = imagesQuery.map((item) => {\n\t\t\t\t\treturn item.image.url;\n\t\t\t\t});\n\n\t\t\t\tassetsQuery = data.assetCollection.items;\n\t\t\t\tconst tags = assetsQuery.map((item) => {\n\t\t\t\t\treturn item.contentfulMetadata.tags[0].name;\n\t\t\t\t});\n\n\t\t\t\t// Initial rendering of portfolio images\n\t\t\t\tsetImgCollection(imagesQuery);\n\n\t\t\t\t// Initial filter options\n\t\t\t\tsetTagFilter([...new Set(tags)]);\n\n\t\t\t\t// Precache images\n\t\t\t\tcacheImages(imageUrls, setIsLoading);\n\t\t\t});\n\n\t\tconst filterSelector = document.getElementById('tagName');\n\t\tconst galleryTitle = document.getElementById('galleryTitle');\n\n\t\tfilterSelector.addEventListener('change', (e) => {\n\t\t\tlet filteredArray = [];\n\n\t\t\tif (e.target.value == 'all') {\n\t\t\t\tfilteredArray = imagesQuery;\n\t\t\t} else {\n\t\t\t\tfilteredArray = imagesQuery.filter((item) => {\n\t\t\t\t\treturn item.image.contentfulMetadata.tags[0].name == e.target.value;\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tgalleryTitle.innerHTML = `${e.target.value} Samples`;\n\n\t\t\tsetImgCollection(filteredArray);\n\t\t});\n\n\t}, []);\n\n\tconst cacheImages = async (imgArray, set) => {\n\t\tconst promises = await imgArray.map((src) => {\n\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\tconst img = new Image();\n\n\t\t\t\timg.src = src;\n\t\t\t\timg.onload = resolve();\n\t\t\t\timg.onerror = reject();\n\t\t\t});\n\t\t});\n\n\t\tawait Promise.all(promises);\n\n\t\tset(false);\n\t};\n\n\treturn (\n\t\t<section className='gallery'>\n\t\t\t<form>\n\t\t\t<legend><h2 id='galleryTitle' className='tw-font-bold tw-capitalize tw-text-center tw-mb-[2rem]'>\n\t\t\t\tAll Samples\n\t\t\t</h2></legend>\n\t\t\t\t<label htmlFor='tagName'>Select Category</label>\n\t\t\t\t<select name='tag' id='tagName'>\n\t\t\t\t\t<option value='all'>All</option>\n\t\t\t\t\t{tagFilter.map((tag, index) => {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<option value={tag} key={index}>\n\t\t\t\t\t\t\t\t{tag}\n\t\t\t\t\t\t\t</option>\n\t\t\t\t\t\t);\n\t\t\t\t\t})}\n\t\t\t\t</select>\n\t\t\t</form>\n\t\t\t<ArtworkContainer imageCollection={imgCollection} />\n\t\t</section>\n\t);\n}\n"],"names":["Artwork","React","lazy","imageCollection","_Fragment","map","item","index","Suspense","_jsx","contentful","import","imgCollection","setImgCollection","useState","tagFilter","setTagFilter","isLoading","setIsLoading","useEffect","spaceId","VITE_CONTENTFUL_SPACE_ID","accessToken","VITE_CONTENTFUL_DELIVERY_API_ACCESS_TOKEN","query","imagesQuery","assetsQuery","fetch","method","headers","Authorization","body","JSON","stringify","then","res","json","data","errors","console","error","items","imageUrls","image","url","assetCollection","tags","contentfulMetadata","name","Set","cacheImages","filterSelector","document","getElementById","galleryTitle","addEventListener","e","filteredArray","target","value","filter","innerHTML","imgArray","set","promises","src","Promise","resolve","reject","img","Image","onload","onerror","all","_jsxs","tag"],"mappings":"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"}